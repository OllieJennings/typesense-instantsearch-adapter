{"version":3,"file":"FacetSearchResponseAdapter.js","names":["_classCallCheck","_createClass","utils","FacetSearchResponseAdapter","typesenseResponse","instantsearchRequest","key","value","_adaptFacetHits","typesenseFacetCounts","_this","adaptedResult","facet","find","field_name","params","facetName","counts","map","facetCount","highlighted","_adaptHighlightTag","highlightPreTag","highlightPostTag","count","adapt","facetHits","facet_counts","exhaustiveFacetsCount","processingTimeMS","search_time_ms","Object","assign","prototype"],"sources":["../src/FacetSearchResponseAdapter.js"],"sourcesContent":["\"use strict\";\n\nimport { utils } from \"./support/utils\";\n\nexport class FacetSearchResponseAdapter {\n  constructor(typesenseResponse, instantsearchRequest) {\n    this.typesenseResponse = typesenseResponse;\n    this.instantsearchRequest = instantsearchRequest;\n  }\n\n  _adaptFacetHits(typesenseFacetCounts) {\n    let adaptedResult = [];\n    const facet = typesenseFacetCounts.find((facet) => facet.field_name === this.instantsearchRequest.params.facetName);\n\n    if (typeof facet !== 'undefined') {\n      adaptedResult = facet.counts.map((facetCount) => ({\n        value: facetCount.value,\n        highlighted: this._adaptHighlightTag(\n          facetCount.highlighted,\n          this.instantsearchRequest.params.highlightPreTag,\n          this.instantsearchRequest.params.highlightPostTag,\n        ),\n        count: facetCount.count,\n      }));\n    }\n\n    return adaptedResult;\n  }\n\n  adapt() {\n    const adaptedResult = {\n      facetHits: this._adaptFacetHits(this.typesenseResponse.facet_counts),\n      exhaustiveFacetsCount: true,\n      processingTimeMS: this.typesenseResponse.search_time_ms,\n    };\n    return adaptedResult;\n  }\n}\n\nObject.assign(FacetSearchResponseAdapter.prototype, utils);\n"],"mappings":"AAAA,YAAY;;AAAC,OAAAA,eAAA;AAAA,OAAAC,YAAA;AAEb,SAASC,KAAK,QAAQ,iBAAiB;AAEvC,WAAaC,0BAA0B;EACrC,SAAAA,2BAAYC,iBAAiB,EAAEC,oBAAoB,EAAE;IAAAL,eAAA,OAAAG,0BAAA;IACnD,IAAI,CAACC,iBAAiB,GAAGA,iBAAiB;IAC1C,IAAI,CAACC,oBAAoB,GAAGA,oBAAoB;EAClD;EAAC,OAAAJ,YAAA,CAAAE,0BAAA;IAAAG,GAAA;IAAAC,KAAA,EAED,SAAAC,gBAAgBC,oBAAoB,EAAE;MAAA,IAAAC,KAAA;MACpC,IAAIC,aAAa,GAAG,EAAE;MACtB,IAAMC,KAAK,GAAGH,oBAAoB,CAACI,IAAI,CAAC,UAACD,KAAK;QAAA,OAAKA,KAAK,CAACE,UAAU,KAAKJ,KAAI,CAACL,oBAAoB,CAACU,MAAM,CAACC,SAAS;MAAA,EAAC;MAEnH,IAAI,OAAOJ,KAAK,KAAK,WAAW,EAAE;QAChCD,aAAa,GAAGC,KAAK,CAACK,MAAM,CAACC,GAAG,CAAC,UAACC,UAAU;UAAA,OAAM;YAChDZ,KAAK,EAAEY,UAAU,CAACZ,KAAK;YACvBa,WAAW,EAAEV,KAAI,CAACW,kBAAkB,CAClCF,UAAU,CAACC,WAAW,EACtBV,KAAI,CAACL,oBAAoB,CAACU,MAAM,CAACO,eAAe,EAChDZ,KAAI,CAACL,oBAAoB,CAACU,MAAM,CAACQ,gBACnC,CAAC;YACDC,KAAK,EAAEL,UAAU,CAACK;UACpB,CAAC;QAAA,CAAC,CAAC;MACL;MAEA,OAAOb,aAAa;IACtB;EAAC;IAAAL,GAAA;IAAAC,KAAA,EAED,SAAAkB,MAAA,EAAQ;MACN,IAAMd,aAAa,GAAG;QACpBe,SAAS,EAAE,IAAI,CAAClB,eAAe,CAAC,IAAI,CAACJ,iBAAiB,CAACuB,YAAY,CAAC;QACpEC,qBAAqB,EAAE,IAAI;QAC3BC,gBAAgB,EAAE,IAAI,CAACzB,iBAAiB,CAAC0B;MAC3C,CAAC;MACD,OAAOnB,aAAa;IACtB;EAAC;AAAA;AAGHoB,MAAM,CAACC,MAAM,CAAC7B,0BAA0B,CAAC8B,SAAS,EAAE/B,KAAK,CAAC","ignoreList":[]}